//
// Generated by JSON2Apex http://JSON2apex.herokuapp.com/
//

@IsTest
public class TestCodeCoverageAggregate {

    static final String JSON_SAMPLE = '{'+
        '  \"size\": 22,'+
        '  \"totalSize\": 22,'+
        '  \"done\": true,'+
        '  \"queryLocator\": null,'+
        '  \"entityTypeName\": \"ApexCodeCoverageAggregate\",'+
        '  \"records\": ['+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d00000004rzIAAQ\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000002eZkiAAE\"'+
        '        },'+
        '        \"ID\": \"01pd0000002eZkiAAE\",'+
        '        \"Name\": \"SiteRegisterController\"'+
        '      },'+
        '      \"NumLinesCovered\": 0,'+
        '      \"NumLinesUncovered\": 28'+
        '    },'+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d00000004rzJAAQ\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000002fNTZAA2\"'+
        '        },'+
        '        \"ID\": \"01pd0000002fNTZAA2\",'+
        '        \"Name\": \"BatchWrapper\"'+
        '      },'+
        '      \"NumLinesCovered\": 0,'+
        '      \"NumLinesUncovered\": 33'+
        '    },'+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d00000004rzKAAQ\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000002eZkjAAE\"'+
        '        },'+
        '        \"ID\": \"01pd0000002eZkjAAE\",'+
        '        \"Name\": \"ChangePasswordController\"'+
        '      },'+
        '      \"NumLinesCovered\": 0,'+
        '      \"NumLinesUncovered\": 6'+
        '    },'+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d00000004rzLAAQ\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000002fBXKAA2\"'+
        '        },'+
        '        \"ID\": \"01pd0000002fBXKAA2\",'+
        '        \"Name\": \"CommunitiesLandingController\"'+
        '      },'+
        '      \"NumLinesCovered\": 0,'+
        '      \"NumLinesUncovered\": 3'+
        '    },'+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d00000004rzMAAQ\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000002eZl6AAE\"'+
        '        },'+
        '        \"ID\": \"01pd0000002eZl6AAE\",'+
        '        \"Name\": \"DynaFormWebService\"'+
        '      },'+
        '      \"NumLinesCovered\": 0,'+
        '      \"NumLinesUncovered\": 46'+
        '    },'+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d00000004rzNAAQ\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000002eZklAAE\"'+
        '        },'+
        '        \"ID\": \"01pd0000002eZklAAE\",'+
        '        \"Name\": \"MyProfilePageController\"'+
        '      },'+
        '      \"NumLinesCovered\": 0,'+
        '      \"NumLinesUncovered\": 40'+
        '    },'+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d00000004rzOAAQ\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000002g773AAA\"'+
        '        },'+
        '        \"ID\": \"01pd0000002g773AAA\",'+
        '        \"Name\": \"ApexSOAP\"'+
        '      },'+
        '      \"NumLinesCovered\": 0,'+
        '      \"NumLinesUncovered\": 7'+
        '    },'+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d00000004rzPAAQ\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000002fXWEAA2\"'+
        '        },'+
        '        \"ID\": \"01pd0000002fXWEAA2\",'+
        '        \"Name\": \"InlinePOC\"'+
        '      },'+
        '      \"NumLinesCovered\": 0,'+
        '      \"NumLinesUncovered\": 6'+
        '    },'+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d00000004rzQAAQ\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000002fNTYAA2\"'+
        '        },'+
        '        \"ID\": \"01pd0000002fNTYAA2\",'+
        '        \"Name\": \"BatchMonitorController\"'+
        '      },'+
        '      \"NumLinesCovered\": 0,'+
        '      \"NumLinesUncovered\": 233'+
        '    },'+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d00000004rzRAAQ\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000001mxogAAA\"'+
        '        },'+
        '        \"ID\": \"01pd0000001mxogAAA\",'+
        '        \"Name\": \"CacheClientController\"'+
        '      },'+
        '      \"NumLinesCovered\": 0,'+
        '      \"NumLinesUncovered\": 48'+
        '    },'+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d00000004rzSAAQ\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000002gk7gAAA\"'+
        '        },'+
        '        \"ID\": \"01pd0000002gk7gAAA\",'+
        '        \"Name\": \"FeedbackSiteContExt\"'+
        '      },'+
        '      \"NumLinesCovered\": 0,'+
        '      \"NumLinesUncovered\": 26'+
        '    },'+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d00000004rzTAAQ\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000002fBXMAA2\"'+
        '        },'+
        '        \"ID\": \"01pd0000002fBXMAA2\",'+
        '        \"Name\": \"CommunitiesSelfRegController\"'+
        '      },'+
        '      \"NumLinesCovered\": 0,'+
        '      \"NumLinesUncovered\": 33'+
        '    },'+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d00000004rzUAAQ\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000002eZkkAAE\"'+
        '        },'+
        '        \"ID\": \"01pd0000002eZkkAAE\",'+
        '        \"Name\": \"ForgotPasswordController\"'+
        '      },'+
        '      \"NumLinesCovered\": 0,'+
        '      \"NumLinesUncovered\": 9'+
        '    },'+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d00000004rzVAAQ\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000002fBXOAA2\"'+
        '        },'+
        '        \"ID\": \"01pd0000002fBXOAA2\",'+
        '        \"Name\": \"CommunitiesSelfRegConfirmController\"'+
        '      },'+
        '      \"NumLinesCovered\": 0,'+
        '      \"NumLinesUncovered\": 1'+
        '    },'+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d00000004rzXAAQ\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000002gAEwAAM\"'+
        '        },'+
        '        \"ID\": \"01pd0000002gAEwAAM\",'+
        '        \"Name\": \"GroupBy\"'+
        '      },'+
        '      \"NumLinesCovered\": 0,'+
        '      \"NumLinesUncovered\": 48'+
        '    },'+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d00000004rzYAAQ\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000002fBXIAA2\"'+
        '        },'+
        '        \"ID\": \"01pd0000002fBXIAA2\",'+
        '        \"Name\": \"CommunitiesLoginController\"'+
        '      },'+
        '      \"NumLinesCovered\": 0,'+
        '      \"NumLinesUncovered\": 5'+
        '    },'+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d00000004rzZAAQ\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000002eZkhAAE\"'+
        '        },'+
        '        \"ID\": \"01pd0000002eZkhAAE\",'+
        '        \"Name\": \"SiteLoginController\"'+
        '      },'+
        '      \"NumLinesCovered\": 0,'+
        '      \"NumLinesUncovered\": 6'+
        '    },'+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d00000004vRmAAI\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000002gytAAAQ\"'+
        '        },'+
        '        \"ID\": \"01pd0000002gytAAAQ\",'+
        '        \"Name\": \"inlinereferrercontroller\"'+
        '      },'+
        '      \"NumLinesCovered\": 0,'+
        '      \"NumLinesUncovered\": 6'+
        '    },'+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d0000001DZiRAAW\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000003znDTAAY\"'+
        '        },'+
        '        \"ID\": \"01pd0000003znDTAAY\",'+
        '        \"Name\": \"NotificationController\"'+
        '      },'+
        '      \"NumLinesCovered\": 0,'+
        '      \"NumLinesUncovered\": 55'+
        '    },'+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d0000001DZiSAAW\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000003znDSAAY\"'+
        '        },'+
        '        \"ID\": \"01pd0000003znDSAAY\",'+
        '        \"Name\": \"BluewolfDevUtils\"'+
        '      },'+
        '      \"NumLinesCovered\": 0,'+
        '      \"NumLinesUncovered\": 120'+
        '    },'+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d000000053viAAA\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000002hpkFAAQ\"'+
        '        },'+
        '        \"ID\": \"01pd0000002hpkFAAQ\",'+
        '        \"Name\": \"ALMJobAlertBatch\"'+
        '      },'+
        '      \"NumLinesCovered\": 0,'+
        '      \"NumLinesUncovered\": 43'+
        '    },'+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d0000001DaYlAAK\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000003zqacAAA\"'+
        '        },'+
        '        \"ID\": \"01pd0000003zqacAAA\",'+
        '        \"Name\": \"GroundComponentList\"'+
        '      },'+
        '      \"NumLinesCovered\": 0,'+
        '      \"NumLinesUncovered\": 7'+
        '    }'+
        '  ]'+
        '}';
        
        static final String JSON_SAMPLE_NULL_LINES_COVERED = '{'+
        '  \"size\": 22,'+
        '  \"totalSize\": 22,'+
        '  \"done\": true,'+
        '  \"queryLocator\": null,'+
        '  \"entityTypeName\": \"ApexCodeCoverageAggregate\",'+
        '  \"records\": ['+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d00000004rzIAAQ\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000002eZkiAAE\"'+
        '        },'+
        '        \"ID\": \"01pd0000002eZkiAAE\",'+
        '        \"Name\": \"SiteRegisterController\"'+
        '      },'+
        //'      \"NumLinesCovered\": 0,'+
        '      \"NumLinesUncovered\": 28'+
        '    }'+
        '  ]'+
        '}';

    static final String JSON_SAMPLE_NULL_LINES_UNCOVERED = '{'+
        '  \"size\": 22,'+
        '  \"totalSize\": 22,'+
        '  \"done\": true,'+
        '  \"queryLocator\": null,'+
        '  \"entityTypeName\": \"ApexCodeCoverageAggregate\",'+
        '  \"records\": ['+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d00000004rzIAAQ\"'+
        '      },'+
        '      \"ApexClassOrTrigger\": {'+
        '        \"attributes\": {'+
        '          \"type\": \"Name\",'+
        '          \"url\": \"/services/data/v39.0/tooling/sobjects/ApexClass/01pd0000002eZkiAAE\"'+
        '        },'+
        '        \"ID\": \"01pd0000002eZkiAAE\",'+
        '        \"Name\": \"SiteRegisterController\"'+
        '      },'+
        '      \"NumLinesCovered\": 10'+
        //'      \"NumLinesUncovered\": 28'+
        '    }'+
        '  ]'+
        '}';

        static final String JSON_APEX_CLASS_OR_TRIGGER_MISSING = '{'+
        '  \"size\": 22,'+
        '  \"totalSize\": 22,'+
        '  \"done\": true,'+
        '  \"queryLocator\": null,'+
        '  \"entityTypeName\": \"ApexCodeCoverageAggregate\",'+
        '  \"records\": ['+
        '    {'+
        '      \"attributes\": {'+
        '        \"type\": \"ApexCodeCoverageAggregate\",'+
        '        \"url\": \"/services/data/v39.0/tooling/sobjects/ApexCodeCoverageAggregate/715d00000004rzIAAQ\"'+
        '      },'+            
        '      \"NumLinesCovered\": 10,'+
        '      \"NumLinesUncovered\": 28'+
        '    }'+
        '  ]'+
        '}';

    static final String JSON_SAMPLE_MISSING_PROPERTIES = '{\"TestAMissingObject\": { \"TestAMissingArray\": [ { \"TestAMissingProperty\": \"Some Value\" } ] } }';

    static final String NUM_LINES_COVERED_ATTR = 'NumLinesCovered';
    static final String NUM_LINES_UNCOVERED_ATTR = 'NumLinesUncovered';
    static final String CLASS_ID = 'ClassID';
    static Map<String, Map<String, Object>> expectedClassOrTriggerNameToResultsMap;

    static void setup() {
        expectedClassOrTriggerNameToResultsMap = new Map<String, Map<String, Object>>();

        expectedClassOrTriggerNameToResultsMap.put('SiteRegisterController', new Map<String, Object>{NUM_LINES_COVERED_ATTR => 0,
                                                                                                     NUM_LINES_UNCOVERED_ATTR => 28,
                                                                                                     CLASS_ID => '01pd0000002eZkiAAE'});
        expectedClassOrTriggerNameToResultsMap.put('BatchWrapper', new Map<String, Object>{NUM_LINES_COVERED_ATTR => 0,
                                                                                           NUM_LINES_UNCOVERED_ATTR => 33,
                                                                                           CLASS_ID => '01pd0000002fNTZAA2'});
        expectedClassOrTriggerNameToResultsMap.put('ChangePasswordController', new Map<String, Object>{NUM_LINES_COVERED_ATTR => 0,
                                                                                                       NUM_LINES_UNCOVERED_ATTR => 6,
                                                                                                       CLASS_ID => '01pd0000002eZkjAAE'});
        expectedClassOrTriggerNameToResultsMap.put('CommunitiesLandingController', new Map<String, Object>{NUM_LINES_COVERED_ATTR => 0,
                                                                                                           NUM_LINES_UNCOVERED_ATTR => 3,
                                                                                                           CLASS_ID => '01pd0000002fBXKAA2'});
        expectedClassOrTriggerNameToResultsMap.put('DynaFormWebService', new Map<String, Object>{NUM_LINES_COVERED_ATTR => 0,
                                                                                                 NUM_LINES_UNCOVERED_ATTR => 46,
                                                                                                 CLASS_ID => '01pd0000002eZl6AAE'});
        expectedClassOrTriggerNameToResultsMap.put('MyProfilePageController', new Map<String, Object>{NUM_LINES_COVERED_ATTR => 0,
                                                                                                      NUM_LINES_UNCOVERED_ATTR => 40,
                                                                                                      CLASS_ID => '01pd0000002eZklAAE'});
        expectedClassOrTriggerNameToResultsMap.put('ApexSOAP', new Map<String, Object>{NUM_LINES_COVERED_ATTR => 0,
                                                                                       NUM_LINES_UNCOVERED_ATTR => 7,
                                                                                       CLASS_ID => '01pd0000002g773AAA'});
        expectedClassOrTriggerNameToResultsMap.put('InlinePOC', new Map<String, Object>{NUM_LINES_COVERED_ATTR => 0,
                                                                                        NUM_LINES_UNCOVERED_ATTR => 6,
                                                                                        CLASS_ID => '01pd0000002fXWEAA2'});
        expectedClassOrTriggerNameToResultsMap.put('BatchMonitorController', new Map<String, Object>{NUM_LINES_COVERED_ATTR => 0,
                                                                                                     NUM_LINES_UNCOVERED_ATTR => 233,
                                                                                                     CLASS_ID => '01pd0000002fNTYAA2'});
        expectedClassOrTriggerNameToResultsMap.put('CacheClientController', new Map<String, Object>{NUM_LINES_COVERED_ATTR => 0,
                                                                                                    NUM_LINES_UNCOVERED_ATTR => 48,
                                                                                                    CLASS_ID => '01pd0000001mxogAAA'});
        expectedClassOrTriggerNameToResultsMap.put('FeedbackSiteContExt', new Map<String, Object>{NUM_LINES_COVERED_ATTR => 0,
                                                                                                  NUM_LINES_UNCOVERED_ATTR => 26,
                                                                                                  CLASS_ID => '01pd0000002gk7gAAA'});
        expectedClassOrTriggerNameToResultsMap.put('CommunitiesSelfRegController', new Map<String, Object>{NUM_LINES_COVERED_ATTR => 0,
                                                                                                           NUM_LINES_UNCOVERED_ATTR => 33,
                                                                                                           CLASS_ID => '01pd0000002fBXMAA2'});
        expectedClassOrTriggerNameToResultsMap.put('ForgotPasswordController', new Map<String, Object>{NUM_LINES_COVERED_ATTR => 0,
                                                                                                       NUM_LINES_UNCOVERED_ATTR => 9,
                                                                                                       CLASS_ID => '01pd0000002eZkkAAE'});
        expectedClassOrTriggerNameToResultsMap.put('CommunitiesSelfRegConfirmController', new Map<String, Object>{NUM_LINES_COVERED_ATTR => 0,
                                                                                                                  NUM_LINES_UNCOVERED_ATTR => 1,
                                                                                                                  CLASS_ID => '01pd0000002fBXOAA2'});
        expectedClassOrTriggerNameToResultsMap.put('GroupBy', new Map<String, Object>{NUM_LINES_COVERED_ATTR => 0,
                                                                                      NUM_LINES_UNCOVERED_ATTR => 48,
                                                                                      CLASS_ID => '01pd0000002gAEwAAM'});
        expectedClassOrTriggerNameToResultsMap.put('CommunitiesLoginController', new Map<String, Object>{NUM_LINES_COVERED_ATTR => 0,
                                                                                                         NUM_LINES_UNCOVERED_ATTR => 5,
                                                                                                         CLASS_ID => '01pd0000002fBXIAA2'});
        expectedClassOrTriggerNameToResultsMap.put('SiteLoginController', new Map<String, Object>{NUM_LINES_COVERED_ATTR => 0,
                                                                                                  NUM_LINES_UNCOVERED_ATTR => 6,
                                                                                                  CLASS_ID => '01pd0000002eZkhAAE'});
        expectedClassOrTriggerNameToResultsMap.put('inlinereferrercontroller', new Map<String, Object>{NUM_LINES_COVERED_ATTR => 0,
                                                                                                       NUM_LINES_UNCOVERED_ATTR => 6,
                                                                                                       CLASS_ID => '01pd0000002gytAAAQ'});
        expectedClassOrTriggerNameToResultsMap.put('NotificationController', new Map<String, Object>{NUM_LINES_COVERED_ATTR => 0,
                                                                                                     NUM_LINES_UNCOVERED_ATTR => 55,
                                                                                                     CLASS_ID => '01pd0000003znDTAAY'});
        expectedClassOrTriggerNameToResultsMap.put('BluewolfDevUtils', new Map<String, Object>{NUM_LINES_COVERED_ATTR => 0,
                                                                                               NUM_LINES_UNCOVERED_ATTR => 120,
                                                                                               CLASS_ID => '01pd0000003znDSAAY'});
        expectedClassOrTriggerNameToResultsMap.put('ALMJobAlertBatch', new Map<String, Object>{NUM_LINES_COVERED_ATTR => 0,
                                                                                               NUM_LINES_UNCOVERED_ATTR => 43,
                                                                                               CLASS_ID => '01pd0000002hpkFAAQ'});
        expectedClassOrTriggerNameToResultsMap.put('GroundComponentList', new Map<String, Object>{NUM_LINES_COVERED_ATTR => 0,
                                                                                                  NUM_LINES_UNCOVERED_ATTR => 7,
                                                                                                  CLASS_ID => '01pd0000003zqacAAA'});
    }

    static testMethod void testValidCodeCoverageResults() {
        setup();

        Test.startTest();
            CodeCoverageAggregate testAgg = (CodeCoverageAggregate)JSON.deserialize(JSON_SAMPLE, CodeCoverageAggregate.class);
        Test.stopTest();

        System.assert(testAgg != null, 'The code coverage class should be instantiated');
        System.assertEquals(22, testAgg.size, 'The size should be correct');
        System.assertEquals(22, testAgg.totalSize, 'The totalSize should be correct');
        System.assert(testAgg.done, 'The done value should be correct');
        System.assertEquals(null, testAgg.queryLocator, 'The queryLocator value should be correct');
        System.assertEquals('ApexCodeCoverageAggregate', testAgg.entityTypeName, 'The entityTypeName value should be correct');
        System.assertNotEquals(null, testAgg.records, 'The records list should be set');
        System.assertEquals(22, testAgg.records.size(), 'The records size value should be correct');

        Set<String>actualClassNames = new Set<String>();

        for (CodeCoverageAggregate.Records resultCoverageRecord : testAgg.records) {
            actualClassNames.add(resultCoverageRecord.apexClassOrTrigger.name);
        }

        System.assert(expectedClassOrTriggerNameToResultsMap.keySet().containsAll(actualClassNames), 'All of the expected trigger and class names should be found');

        for (CodeCoverageAggregate.Records resultCoverageRecord : testAgg.records) {
            String triggerOrClassName = resultCoverageRecord.apexClassOrTrigger.name;
            String actualClassId = resultCoverageRecord.apexClassOrTrigger.id;
            Integer expectedNumLinesCovered = (Integer)expectedClassOrTriggerNameToResultsMap.get(triggerOrClassName).get(NUM_LINES_COVERED_ATTR);
            Integer expectedNumLinesUnCovered = (Integer)expectedClassOrTriggerNameToResultsMap.get(triggerOrClassName).get(NUM_LINES_UNCOVERED_ATTR);
            String expectedClassId = (String)expectedClassOrTriggerNameToResultsMap.get(triggerOrClassName).get(CLASS_ID);
            Integer actualNumLinesCovered = resultCoverageRecord.numLinesCovered;
            Integer actualNumLinesUnCovered = resultCoverageRecord.NumLinesUnCovered;

            System.assertEquals(expectedNumLinesCovered, actualNumLinesCovered, 'The number of covered lines should be correct for '+triggerOrClassName);
            System.assertEquals(expectedNumLinesUnCovered, actualNumLinesUnCovered, 'The number of uncovered lines should be correct for '+triggerOrClassName);
            System.assertEquals(expectedClassId, actualClassId, 'The class Id should be correct for '+triggerOrClassName);
        }
    }

    static testMethod void testValidTestRunResultDeconstruct() {
        setup();

        CodeCoverageAggregate testCoverage = (CodeCoverageAggregate)JSON.deserialize(JSON_SAMPLE, CodeCoverageAggregate.class);
        List<Code_Coverage__c> actualCodeCoverageRecords = new List<Code_Coverage__c>();

        Test.startTest();
            actualCodeCoverageRecords = testCoverage.deconstructIntoSobjectRecords();
        Test.stopTest();

        System.assertEquals(22, actualCodeCoverageRecords.size(), 'The correct number of sobject records should be instantiated');

        Map<String, List<Code_Coverage__c>> coverageGroupedByClassName = Groupby.Strings(Code_Coverage__c.Class_Name__c,actualCodeCoverageRecords);

        System.assert(expectedClassOrTriggerNameToResultsMap.keySet().containsAll(coverageGroupedByClassName.keySet()), 'All of the expected trigger and class names should be found');
        for (String classNameKey : coverageGroupedByClassName.keySet()) {
            Integer expectedNumLinesCovered = (Integer)expectedClassOrTriggerNameToResultsMap.get(classNameKey).get(NUM_LINES_COVERED_ATTR);
            Integer expectedNumLinesUnCovered = (Integer)expectedClassOrTriggerNameToResultsMap.get(classNameKey).get(NUM_LINES_UNCOVERED_ATTR);
            String expectedClassId = (String)expectedClassOrTriggerNameToResultsMap.get(classNameKey).get(CLASS_ID);
            Integer expectedTotalLines = expectedNumLinesCovered + expectedNumLinesUnCovered;

            String actualClassId = (String)coverageGroupedByClassName.get(classNameKey)[0].Class_Id__c;
            Integer actualNumLinesCovered = (Integer)coverageGroupedByClassName.get(classNameKey)[0].Lines_Covered__c;
            Integer actualTotalLines = (Integer)coverageGroupedByClassName.get(classNameKey)[0].Total_Lines__c;

            System.assertEquals(expectedNumLinesCovered, actualNumLinesCovered, 'The lines covered should be correct for '+classNameKey);
            System.assertEquals(expectedTotalLines, actualTotalLines, 'The totallines should be correct for '+classNameKey);
            System.assertEquals(expectedClassId, actualClassId, 'The class Id should be correct for '+classNameKey);
        }
    }

    static testMethod void deconstructIntoSobjectRecords_nullRecords() {
        Test.startTest();

            List<Code_Coverage__c> actualCodeCoverageRecords = null;
            try {
                actualCodeCoverageRecords = new CodeCoverageAggregate().deconstructIntoSobjectRecords();
            } catch (Exception e) {
                System.assert(false, 'No exceptions should be thrown.');
            }

        Test.stopTest();

        System.assertNotEquals(null, actualCodeCoverageRecords, 'The code coverage objects list should not be null.');
        System.assert(actualCodeCoverageRecords.isEmpty(), 'There should be no code coverage objects returned.');
    }
    
    static testMethod void deconstructIntoSobjectRecords_nullLinesCovered() {
        setup(); 
        Test.startTest();

            CodeCoverageAggregate testCoverage = (CodeCoverageAggregate)JSON.deserialize(JSON_SAMPLE_NULL_LINES_COVERED, CodeCoverageAggregate.class);
            List<Code_Coverage__c> actualCodeCoverageRecords = null;
            try {
                actualCodeCoverageRecords = testCoverage.deconstructIntoSobjectRecords();
            } catch (Exception e) {
                System.assert(false, 'No exceptions should be thrown.' + e.getMessage() + e.getStackTraceString());
            }

        Test.stopTest();

        System.assertNotEquals(null, actualCodeCoverageRecords, 'The code coverage objects list should not be null.');
        System.assertEquals(1, actualCodeCoverageRecords.size(), 'There should be 1 code coverage objects returned.');
        
        Map<String, List<Code_Coverage__c>> coverageGroupedByClassName = Groupby.Strings(Code_Coverage__c.Class_Name__c,actualCodeCoverageRecords);

        String classNameKey = 'SiteRegisterController';
        
        Integer expectedNumLinesCovered = null;
        Integer expectedNumLinesUnCovered = (Integer)expectedClassOrTriggerNameToResultsMap.get(classNameKey).get(NUM_LINES_UNCOVERED_ATTR);
        String expectedClassId = (String)expectedClassOrTriggerNameToResultsMap.get(classNameKey).get(CLASS_ID);
        Integer expectedTotalLines = expectedNumLinesUnCovered;

        String actualClassId = (String)coverageGroupedByClassName.get(classNameKey)[0].Class_Id__c;
        Integer actualNumLinesCovered = (Integer)coverageGroupedByClassName.get(classNameKey)[0].Lines_Covered__c;
        Integer actualTotalLines = (Integer)coverageGroupedByClassName.get(classNameKey)[0].Total_Lines__c;

        System.assertEquals(expectedNumLinesCovered, actualNumLinesCovered, 'The lines covered should be correct for '+classNameKey);
        System.assertEquals(expectedTotalLines, actualTotalLines, 'The totallines should be correct for '+classNameKey);
        System.assertEquals(expectedClassId, actualClassId, 'The class Id should be correct for '+classNameKey);
    }

    static testMethod void deconstructIntoSobjectRecords_nullLinesUnCovered() {
        setup(); 
        Test.startTest();

            CodeCoverageAggregate testCoverage = (CodeCoverageAggregate)JSON.deserialize(JSON_SAMPLE_NULL_LINES_UNCOVERED, CodeCoverageAggregate.class);
            List<Code_Coverage__c> actualCodeCoverageRecords = null;
            try {
                actualCodeCoverageRecords = testCoverage.deconstructIntoSobjectRecords();
            } catch (Exception e) {
                System.assert(false, 'No exceptions should be thrown.' + e.getMessage() + e.getStackTraceString());
            }

        Test.stopTest();

        System.assertNotEquals(null, actualCodeCoverageRecords, 'The code coverage objects list should not be null.');
        System.assertEquals(1, actualCodeCoverageRecords.size(), 'There should be 1 code coverage objects returned.');
        
        Map<String, List<Code_Coverage__c>> coverageGroupedByClassName = Groupby.Strings(Code_Coverage__c.Class_Name__c,actualCodeCoverageRecords);

        String classNameKey = 'SiteRegisterController';
        
        Integer expectedNumLinesCovered = 10;
        Integer expectedNumLinesUnCovered = (Integer)expectedClassOrTriggerNameToResultsMap.get(classNameKey).get(NUM_LINES_UNCOVERED_ATTR);
        String expectedClassId = (String)expectedClassOrTriggerNameToResultsMap.get(classNameKey).get(CLASS_ID);
        Integer expectedTotalLines = expectedNumLinesCovered;

        String actualClassId = (String)coverageGroupedByClassName.get(classNameKey)[0].Class_Id__c;
        Integer actualNumLinesCovered = (Integer)coverageGroupedByClassName.get(classNameKey)[0].Lines_Covered__c;
        Integer actualTotalLines = (Integer)coverageGroupedByClassName.get(classNameKey)[0].Total_Lines__c;

        System.assertEquals(expectedNumLinesCovered, actualNumLinesCovered, 'The lines covered should be correct for '+classNameKey);
        System.assertEquals(expectedTotalLines, actualTotalLines, 'The totallines should be correct for '+classNameKey);
        System.assertEquals(expectedClassId, actualClassId, 'The class Id should be correct for '+classNameKey);
    }

    static testMethod void deconstructIntoSobjectRecords_nullApexClassOrTrigger() {
        setup(); 
        Test.startTest();

            CodeCoverageAggregate testCoverage = (CodeCoverageAggregate)JSON.deserialize(JSON_APEX_CLASS_OR_TRIGGER_MISSING, CodeCoverageAggregate.class);
            List<Code_Coverage__c> actualCodeCoverageRecords = null;
            try {
                actualCodeCoverageRecords = testCoverage.deconstructIntoSobjectRecords();
            } catch (Exception e) {
                System.assert(false, 'No exceptions should be thrown.' + e.getMessage() + e.getStackTraceString());
            }

        Test.stopTest();

        System.assertNotEquals(null, actualCodeCoverageRecords, 'The code coverage objects list should not be null.');
        System.assertEquals(0, actualCodeCoverageRecords.size(), 'There should be no code coverage objects returned.');                
    }
}